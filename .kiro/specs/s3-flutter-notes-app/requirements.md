# 需求文档

## 介绍

基于S3对象存储兼容的Flutter笔记应用，支持Android、Windows桌面端和Mac桌面端。应用采用Markdown格式存储笔记，提供实时编辑和预览功能，具有多级目录结构和标签过滤功能。界面布局为三栏式：目录树、笔记列表、编辑预览区域。

## 需求

### 需求 1 - 跨平台支持

**用户故事：** 作为用户，我希望能在Android、Windows桌面和Mac桌面上使用同一个笔记应用，以便在不同设备间无缝切换。

#### 验收标准

1. WHEN 用户在Android设备上安装应用 THEN 应用应能正常运行并提供完整功能
2. WHEN 用户在Windows桌面上安装应用 THEN 应用应能正常运行并提供完整功能  
3. WHEN 用户在Mac桌面上安装应用 THEN 应用应能正常运行并提供完整功能
4. WHEN 用户在不同平台间切换 THEN 数据应保持同步一致

### 需求 2 - S3对象存储集成

**用户故事：** 作为用户，我希望我的笔记能存储在S3兼容的对象存储中，以便数据安全可靠且可跨设备访问。

#### 验收标准

1. WHEN 用户配置S3存储凭证 THEN 应用应能成功连接到S3兼容存储
2. WHEN 用户创建或修改笔记 THEN 数据应自动同步到S3存储
3. WHEN 用户在新设备登录 THEN 应能从S3存储加载所有笔记数据
4. IF 网络连接中断 THEN 应用应支持离线模式并在恢复连接后同步

### 需求 3 - Markdown编辑和预览

**用户故事：** 作为用户，我希望能使用Markdown格式编写笔记，并实时预览渲染效果，以便高效地创作格式化内容。

#### 验收标准

1. WHEN 用户在编辑器中输入Markdown语法 THEN 预览区域应实时显示渲染结果
2. WHEN 用户编辑笔记内容 THEN 更改应实时保存到本地缓存
3. WHEN 用户使用Markdown语法 THEN 应支持标题、列表、链接、图片、代码块等常用语法
4. WHEN 用户切换编辑/预览模式 THEN 界面应流畅响应

### 需求 4 - 多级目录结构

**用户故事：** 作为用户，我希望能创建多级文件夹来组织我的笔记，以便更好地分类管理内容。

#### 验收标准

1. WHEN 用户右键点击目录树 THEN 应显示创建文件夹和笔记的选项
2. WHEN 用户创建文件夹 THEN 应能在任意层级下创建子文件夹
3. WHEN 用户拖拽笔记或文件夹 THEN 应能重新组织目录结构
4. WHEN 用户删除文件夹 THEN 应提示确认并处理其中的笔记
5. WHEN 用户展开/折叠文件夹 THEN 目录树应响应并记住状态

### 需求 5 - 标签系统

**用户故事：** 作为用户，我希望能为笔记添加标签并按标签过滤，以便快速找到相关内容。

#### 验收标准

1. WHEN 用户编辑笔记 THEN 应能添加、删除和修改标签
2. WHEN 用户在标签过滤区选择标签 THEN 笔记列表应只显示包含该标签的笔记
3. WHEN 用户选择多个标签 THEN 应支持AND/OR逻辑过滤
4. WHEN 用户输入标签名 THEN 应提供自动补全建议
5. WHEN 标签不再被任何笔记使用 THEN 应从标签列表中自动移除

### 需求 6 - 三栏布局界面

**用户故事：** 作为用户，我希望界面采用清晰的三栏布局，以便同时查看目录、笔记列表和编辑内容。

#### 验收标准

1. WHEN 用户打开应用 THEN 界面应显示左侧目录树、中间笔记列表、右侧编辑预览区
2. WHEN 用户调整栏宽 THEN 各栏应能灵活调整大小
3. WHEN 用户在目录树选择文件夹 THEN 中间列表应显示该文件夹下的笔记
4. WHEN 用户在列表选择笔记 THEN 右侧应显示笔记内容进行编辑
5. IF 屏幕空间有限 THEN 应支持隐藏某些栏位或响应式布局

### 需求 7 - 便签功能

**用户故事：** 作为用户，我希望能创建快速便签，以便记录临时想法和待办事项。

#### 验收标准

1. WHEN 用户点击便签按钮 THEN 应快速创建一个新的便签笔记
2. WHEN 用户创建便签 THEN 便签应自动保存到指定的便签文件夹
3. WHEN 用户查看便签列表 THEN 应按创建时间倒序显示
4. WHEN 用户编辑便签 THEN 应支持快速格式化和标签添加

### 需求 8 - 界面美观性

**用户故事：** 作为用户，我希望应用界面美观大方且符合各平台设计规范，以便获得良好的使用体验。

#### 验收标准

1. WHEN 用户在不同平台使用应用 THEN 界面应遵循对应平台的设计规范
2. WHEN 用户进行各种操作 THEN 界面动画应流畅自然
3. WHEN 用户长时间使用 THEN 应支持深色/浅色主题切换
4. WHEN 用户调整字体大小 THEN 界面应保持良好的可读性和布局
5. WHEN 应用加载内容 THEN 应提供适当的加载指示器和反馈